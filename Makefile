#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////// VARIABLES //////////////////////////////////////////////////////////////////////////
#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
CC = gcc
CL = clean
H_DIR = ./header
SRC_DIR = ./src
OBJ_DIR = ./obj
SIMD_H = $(H_DIR)/simdsort.h
MAIN_OBJ = $(OBJ_DIR)/main.o
SIMD_OBJ = $(OBJ_DIR)/simdsort.o 
MAIN_SRC = $(SRC_DIR)/main.c
SIMD_SRC = $(SRC_DIR)/simdsort.c
EXEC = simdsort
C_FLAGS = -g -Wall

#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#//////////////////////////////////////////////////////////////////// TARGETS ///////////////////////////////////////////////////////////////////////////
#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
# - DESCRIPTION:
.PHONY: all
all: inimsj $(EXEC) endmsj

$(EXEC): clean obj $(MAIN_OBJ) $(SIMD_OBJ)
	@echo '-------------------------------------------------------------------------'
	@echo ' => Compiling target "$(@F)"'
	$(CC) $(C_FLAGS) $(MAIN_OBJ) $(SIMD_OBJ) -o $@
	@echo ' => "$(@F)" compiled in the directory "$(@D)"'
	@echo ' => Enter the directory "$(@D)" by typing: cd $(@D)'
	@echo ' => Execute the program by typing: ./$(@F)'
	@echo ' => For any problem check the README file'
	@echo '-------------------------------------------------------------------------'

#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
# - DESCRIPTION:

$(MAIN_OBJ): $(MAIN_SRC)
	@echo '-------------------------------------------------------------------------'
	@echo ' => Compiling target "$(@F)"'
	$(CC) $(C_FLAGS) -c $< -o $@
	@echo ' => "$(@F)" compiled in the directory "$(@D)"'
	@echo '-------------------------------------------------------------------------'

$(SIMD_OBJ): $(SIMD_SRC) $(SIMD_H)
	@echo '-------------------------------------------------------------------------'
	@echo ' => Compiling target "$(@F)"'
	$(CC) $(C_FLAGS) -c $< -o $@
	@echo ' => "$(@F)" compiled in the directory "$(@D)"'
	@echo '-------------------------------------------------------------------------'

#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
# - DESCRIPTION:

.PHONY: inimsj
inimsj:
	@echo '/////////////////////////////////////////////////////////////////////////'
	@echo ' => Compiling "convolution" program'
	@echo '-------------------------------------------------------------------------'

.PHONY: endmsj
endmsj:
	@echo '/////////////////////////////////////////////////////////////////////////'

#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
# - DESCRIPTION:

.PHONY: obj
obj: 
	@echo '-------------------------------------------------------------------------'
	@echo ' => Creating direcotry "$@"'
	mkdir $(OBJ_DIR)
	@echo '-------------------------------------------------------------------------'

#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
# - DESCRIPTION:

.PHONY: clean
clean: 
	@echo '-------------------------------------------------------------------------'
	@echo ' => Deleting directory "$(OBJ_DIR)" compilation contents'
	rm -rf $(OBJ_DIR)
	@echo '-------------------------------------------------------------------------'

#////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////